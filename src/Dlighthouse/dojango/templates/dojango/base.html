{% spaceless %}
        {% load dojango_base %}
        {% load dojango_filters %}
	{% load dajaxice_templatetags %}
        {% if not DOJANGO %}
                {# if the context processor did not pass the DOJANGO context, we set it here #}
                {% set_dojango_context %}
        {% endif %}
       
        {% if not LANGUAGE_CODE %}
                {% load i18n %}
                {% get_current_language as LANGUAGE_CODE %}
                {% get_current_language_bidi as LANGUAGE_BIDI %}
        {% endif %}
{% block _dojango_doctype %}
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
{% endblock %}
{% endspaceless %}

{% block _dojango_html_start_tag %}
<html xmlns="http://www.w3.org/1999/xhtml"{% block _dojango_html_lang %}{% endblock %}>
{% endblock %}


{% spaceless %}
        <head>
                {% block _dojango_meta_content_type %}
                <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
                {% endblock %}

                {# This must be before any non-english text, i.e. title. http://www.dojotoolkit.org/book/dojo-book-0-9/part-3-programmatic-dijit-and-dojo/i18n/globalization-guidelines/encoding-guideli#textfiles #}
                {% block _dojango_meta_content_lang %}{% endblock %}

                <title>Lighthouse Search</title>

                <link rel="shortcut icon" href="{{ MEDIA_URL }}Images/favicon.png" />


                {% block _dojango_dojo_styles %}
                <style type="text/css">
                        @import "{{ DOJANGO.DOJO_URL }}/resources/dojo.css";
                        @import "{{ DOJANGO.THEME_CSS_URL }}";
			@import url("http://ajax.googleapis.com/ajax/libs/dojo/1.7.2/dojo/resources/dnd.css");
			@import url("{{ MEDIA_URL }}dndDefault.css");
                </style>
                {% endblock %}


		{% dajaxice_js_import %}

                <script type="text/javascript">
                        // baseUrl setting is needed, if you want to combine a local with a remote build!
                        {% block _dojango_dj_config %}
                                var dojoConfig = {
					//async: true,
                                        //'isDebug':{{ DOJANGO.DEBUG|json }},
                                        //'parseOnLoad':true,
                                        'baseUrl':"{{ DOJANGO.DOJO_BASE_PATH }}"
                                        {% if not DOJANGO.IS_LOCAL %}
                                                ,'dojoBlankHtmlUrl': "{{ DOJANGO.DOJANGO_URL }}/resources/blank.html"
                                                ,'dojoIframeHistoryUrl': "{{ DOJANGO.DOJANGO_URL }}/resources/blank.html"
                                        {% endif %}
					{% if DOJANGO.VERSION > '1.6' %}
						,'paths':{'dojo': '{{ DOJANGO.DOJO_URL }}', 'dijit': '{{ DOJANGO.DIJIT_URL }}', 'dojox': '{{ DOJANGO.DOJOX_URL }}'}
					{% else %}{% if DOJANGO.CDN_USE_SSL and not DOJANGO.IS_LOCAL %}
						,'modulePaths':{'dojo': '{{ DOJANGO.DOJO_URL }}', 'dijit': '{{ DOJANGO.DIJIT_URL }}', 'dojox': '{{ DOJANGO.DOJOX_URL }}'}
					{% endif %}{% endif %}
                                };
                        {% endblock %}
                </script>
       

                {% block _dojango_post_dj_config %}
                {# don't use this block, it is used by base_i18n.html #}
                {% endblock %}
       
       
                {% block dojango_post_dj_config %}
                {# if you want to manipulate djConfig stuff #}
                <script>dojoConfig.parseOnLoad = false;</script>
                {% endblock %}
       
       
                <script type="text/javascript" src="{{ DOJANGO.DOJO_SRC_FILE }}">
                </script>
       

                {# for a locally built version dojango should already be included #}
                {% if not DOJANGO.IS_LOCAL_BUILD %}
                <script type="text/javascript" src="{{ DOJANGO.DOJANGO_SRC_FILE }}">
                </script>
                {% endif %}

      
 
            <!--
                        #leftAccordion {
                                width: 65%;
                                font-family: \u2018Palatino Linotype\u2019, \u2018Book Antiqua\u2019, Palatino, serif;
                                font-size:16px;
                        }
            -->



                {% block dojango_header_extra %}
			
		<!-- for dajx prototype -->
		{% include "dajaxDojo.html" %}
	
		
		
		{% include "style.html" %}
                <script type="text/javascript">
                        window.__globalList = {
                                dojo: true,
                                dijit: true,
                                dojox: true,
                                djConfig: true
                        };
                        for(var i in window) {
                                window.__globalList[i] = true;
                        }
                </script>
                {% endblock %}
        </head>
{% endspaceless %}



{% block dojango_body %}
	<body class="{{ DOJANGO.THEME }}">
	<!-- basic preloader: -->
	<div id="loader">
		<div id="loaderInner">
			<img src="{{ MEDIA_URL }}Images/Loading.gif"/>                        
		</div>
	</div>

	<!-- "main" BorderContainer just contains page title and another 
		BorderContainer -->
	<div id="main" dojoType="dijit.layout.BorderContainer">
		<div id="header" dojoType="dijit.layout.ContentPane" region="top" style="border-top:6px; 
                border-color:#c9dcfa;">
                        <img src="{{ MEDIA_URL }}Images/NewHeader.png"/>
                </div>

		<!-- "mainSplit" BorderContainer has all the real content -->
		<div dojoType="dijit.layout.BorderContainer" liveSplitters="false" 
			design="sidebar" region="center" id="mainSplit">

			<div dojoType="dijit.layout.TabContainer" duration="200"
				minSize="100" style="width: 550px;" id="leftTab" 
				region="leading" splitter="true">

				<!-- Simple Search-->
				<div dojoType="dijit.layout.ContentPane" title="Simple Search" selected="{{ request.session.selectedSimpleSearchTab|default:"false" }}" style="padding:10px;">
                                        
					{% block dojango_content_simpleSearch %}{% endblock %}
				</div><!-- end Simple Search -->

				<!--  Advanced Search -->
				<div dojoType="dijit.layout.ContentPane" title="Advanced Search" selected="{{ AdvancedTab|default:"false" }}" style="padding:10px;">
					{% block dojango_content_advancedSearch %}{% endblock %}
				</div><!-- end Advanced Search -->

				<!--  General Search -->
                               <div dojoType="dijit.layout.ContentPane" title="Keyword Search" selected="{{ request.session.selectedKeywordSearchTab|default:"false" }}" style="padding:10px;">
                                        <div id="title-div">
                                                <table id="icon-table">
                                                        <tr>
                                                                <td id="icon-cell">
                                                                        <img src="{{ MEDIA_URL }}Images/keywordSearch.png" width="32" height="32"/>
                                                                </td>           
                                                                <td id="title-cell">
                                                                        Keyword Search
                                                                </td>
                                                        </tr>
                                                </table>        
                                        </div>
                                        <br>
                                        <div id="button-div">
                                                <table id="icon-table">
                                                        <tr>
                                                        <td style="padding-left:5px; width:188px;">
                                                            <img src="{{ MEDIA_URL }}Images/arrow.png" width="8" height="8"/>
                                                            <b> Please enter a word or phrase: </b>
                                                        </td>
                                                        <form action="/search/" method="get">
                                                        <td style="padding-left:5px; padding-right:10px;">
                                                                <input type="text" name="q" style="width:100%; font-size:14px;">
                                                        </td>
                                                        <td style="text-align:right; width:20px;">
                                                                <button type="submit" name="Search" id="searchButton" title="Search String">
                                                                        <img src="{{ MEDIA_URL }}Images/dialog-ok-4.png" width="16" height="16"/>
                                                                </button >                      
                                                        </td>
                                                        </form>
                                                        </tr>
                                                </table>
        				    	
                                        </div>
				</div><!-- end General Search -->

			</div><!-- end TabsContainer -->


			<!-- top tabs (marked as "center" to take up the main part of the BorderContainer) -->
			<div dojoType="dijit.layout.TabContainer" region="center" id="topTabs">

				<!-- first upper tab -->
				<div id="tab1" dojoType="dijit.layout.ContentPane" title="Search Result" selected="true"
				style="padding:10px; display:none;">
					{% block dojango_content_search_result %}{% endblock %}		
				</div><!-- end:first upper tab -->

				<!-- second tab -->
				<div id="tab2" dojoType="dijit.layout.ContentPane" title="Script" selected="false"
				style="padding:10px; height:45%;">
                                        <ul dojoType="dijit.Menu" id="popupMenu" targetNodeIds="tab2" contextMenuForWindow="true"style="display:none;">
                                                <li dojoType="dijit.MenuItem" onClick="alert('just a test!')">Scalar</li>
                                                <li dojoType="dijit.MenuItem" onClick="alert('just a test!')">Vector</li>
                                                <li dojoType="dijit.PopupMenuItem">
                                                        <span>Matrx</span>
                                                        <ul dojoType="dijit.Menu" id="submenu2">
                                                                <li dojoType="dijit.PopupMenuItem">
                                                                <span>general</span>
                                                                <ul dojoType="dijit.Menu" id="submenu4">
                                                                        <li dojoType="dijit.MenuItem" onClick="alert('Sub-submenu 1!')">full</li>
                                                                        <li dojoType="dijit.MenuItem" onClick="alert('Sub-submenu 2!')">band</li>
                                                                        <li dojoType="dijit.MenuItem" onClick="alert('Sub-submenu 2!')">packed</li>
                                                                        <li dojoType="dijit.MenuItem" onClick="alert('Sub-submenu 2!')">tridiagonal</li>
                                                                </ul>
                                                                <li dojoType="dijit.MenuItem" onClick="alert('Submenu 2!')">symmetric</li>
                                                                <li dojoType="dijit.MenuItem" onClick="alert('Submenu 2!')">SPD</li>
                                                                <li dojoType="dijit.MenuItem" onClick="alert('Submenu 2!')">Hermitian</li>
                                                                <li dojoType="dijit.MenuItem" onClick="alert('Submenu 2!')">HPD</li>
                                                                <li dojoType="dijit.MenuItem" onClick="alert('Submenu 2!')">triangular</li>
                                                                </li>
                                                        </ul>
                                                </li>
                                        </ul>

					<!--textarea dojoType="dijit.form.SimpleTextarea" id="scriptArea" rows="30" cols="100" 
					align="left" title="">
					Type your script here!
					</textarea-->
				        <div>
        					<form action="/script/" method="post">
                                                {% csrf_token %}
                                 
                                                {{ scriptForm.non_field_errors }}
                                                <div class="fieldWrapper">
                                                        {{ scriptForm.script.errors }}
                                                        
                                                        <!--{{ scriptForm.script }} -->
                                                        
                                                        <textarea id="id_script" rows="10" cols="40" name="script"></textarea>
                                                        
                                                </div>
                                 

        					<button type="submit" name="Submit" id="submitButton" title="Submit Answer">
        					Submit
        					</button >
        					</form>
					</div>
					<div>{% block dojango_content_script %}{% endblock %}</div>

 
					<!--div style="border: 1px solid #ccc">
						<textarea dojoType="dijit.Editor" id="scriptArea" rows="30" cols="100" title="" plugins="['cut','copy','paste','|','bold','italic','underline', 'subscript','superscript']" styleSheets="/dojotoolkit/dojo/resources/dojo.css">
						</textarea>
					</div-->
				</div><!-- end second tab -->
			</div><!-- end of region="center" TabContainer -->


			<!-- bottom right tabs -->
			<div dojoType="dijit.layout.TabContainer" id="bottomTabs" 
			tabPosition="top" selectedChild="btab1"
			region="bottom" splitter="true" style="height:55%">
				<!-- btab 1 -->
				<div id="btab1" dojoType="dijit.layout.ContentPane" title="Work Area" style="padding:0px;">
                                        <div dojoType="dijit.layout.SplitContainer" orientation="horizontal"
                                                sizerWidth="5" activeSizing="true"
                                                style="border: 0px solid #bfbfbf; float: left; width: 100%; height: 100%;">
                                                <div dojoType="dijit.layout.ContentPane" sizeMin="50" sizeShare="50" style="padding:10px;">
                                                        <div id="title-div">
                                                                <table id="icon-table">
                                                                        <tr>
                                                                                <td id="icon-cell">
                                                                                        <img src="{{ MEDIA_URL }}Images/view-pim-tasks.png" width="32" height="32"/>
                                                                                </td>           
                                                                                <td id="title-cell">
                                                                                        Selected Routines
                                                                                </td>
                                                                        </tr>
                                                                </table>        
                                                        </div>                                                        
						       {% block _dojango_selected_Routines %}
						       {% include "selectedRoutines.html" %}
						       {% endblock %}
                                                </div>
                                                <div dojoType="dijit.layout.ContentPane" sizeMin="50" sizeShare="50" style="padding:10px;">
                                                        <div id="title-div">
                                                                <table id="icon-table">
                                                                        <tr>
                                                                                <td id="icon-cell">
                                                                                        <img src="{{ MEDIA_URL }}Images/text-x-python.png" width="32" height="32"/>
                                                                                </td>           
                                                                                <td id="title-cell">
                                                                                        Code Template
                                                                                </td>
                                                                        </tr>
                                                                </table>        
                                                        </div>
                                                        <div id="div-codeTemp">
								
							</div>
							<br/>
                                              {{ generatedCodeTemplate }}
                                                </div>
                                        </div><!-- SplitContainer -->
				</div><!-- end btab1 -->

				<!-- btab2 -->
				<div id="btab2" dojoType="dijit.layout.ContentPane" title="Authors" style="padding:20px;">
					<span  id="themeData"></span>
				</div><!-- end btab2 -->
			</div><!-- end Bottom TabContainer -->
                        
		</div> <!-- end of "mainSplit" BorderContainer -->
	</div><!-- end of "main" BorderContainer -->




	{% block _dojango_dojo_require %}
	{% include "dojoRequires.html" %}
	{% endblock %}



	{% block _dojango_js_functions %}
	{% include "jsFunctions.html" %}
	{% endblock %}




    	{% block dojango_require %}
        	<script type="text/javascript">
        		{% for require in DOJANGO.COLLECTOR %}
        			{% spaceless %}
        				dojo.require("{{ require }}");
        			{% endspaceless %}
        		{% endfor %}		
        	</script>
        {% endblock %}
    </body>
{% endblock %}

</html>
