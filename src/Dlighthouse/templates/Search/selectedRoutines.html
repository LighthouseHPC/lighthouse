<script type="text/javascript">
	var selectedRoutine_session = [];
</script>

<div id="selectedRoutines">
	<form>
		<!--Dropped-items area-->
		<ul id="selectedListNode"
		    class="container2" style="border: 1px solid #444; background-color: #eee; padding-bottom:30px; padding-left:30px;">
			<div style="border: 2px solid #bbb; padding: 5px; background-color: #fff">Drop selected routines here:</div>
		</ul>
		
		<!--load request.session["selectedRoutines]-->
		{% if selectedRoutines %}
		<ul id="sel_routineListNode" class="container2" style="border: 1px solid #444; background: #eee; padding-bottom:30px; padding-left:30px;">	
		{% for item in selectedRoutines %}
			<!--generate the selectedRoutine_session array for code generation for the case of no dnd action-->
			<script type="text/javascript">
				selectedRoutine_session.push('{{ item.thePrecision }}'+'{{ item.routineName }}');
			</script>
			<li class="sel_dojoDndItem" id="sel_{{ item.thePrecision|upper }}{{ item.routineName|upper }}">
				<div class="routineName">
					<h4>{{ item.thePrecision|upper }}{{ item.routineName|upper }}
						<span class="">
							<button dojoType="dijit.form.Button" baseClass="acmeButton" onclick="dijit.byId('sel_{{ item.id }}').show()">
								<img src="{{ MEDIA_URL }}Images/question.png" width="16" height="16"/>
							</button>
						</span>
					</h4>
				</div>
				<div class="dijitHidden">
					<div id="sel_{{ item.id }}" dojoType="dijit.Dialog" title="Routine Info - {{ item.thePrecision|upper }}{{ item.routineName|upper }}">
						<div align="center">
							<table id="table_main" width="80%" border = "1">
								<tr>
								<th>Precision</th>
								<th>Routine Name</th>
								<th>Matrix Type</th>
								<th>Storage</th>
								</tr>
								<tr>
								<td>{{ item.thePrecision|upper }}</td>
								<td>{{ item.routineName|upper }}</td> 
								<td>{{ item.matrixType }}</td> 
								<td>{{ item.storageType }}</td>      
								</tr>
							</table><br/>
							<iframe src="{{ item.url }}" width="640px" height="400px"></iframe><br/></br> 
							<button onClick="dijit.byId('sel_{{ item.id }}').hide()">Close</button>
						</div>
					</div>
				</div>
					
			</li>
		{% endfor %}
		</ul>
		{% endif %}	

		<div id="button-div">
		    <table align="right">
			<tr>
				<td>
					<button type="button" onclick="Dajaxice.Driver.createTemplate(Dajax.process, {'selectedRoutine_ajax': selectedRoutineNames, 'selectedRoutine_session': selectedRoutine_session});">
					Generate Template
					</button >
				</td>
<!--				<td>					
					<button type="button" onclick="selectedRoutineClear();">
					Clear
					</button>
				 </td>-->
			</tr>
		    </table>
		</div>

	</form>
</div>

