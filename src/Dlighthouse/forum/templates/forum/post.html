{% extends "forum/fbase.html" %}

{% block content %}
    <p>{{ title }}</p>
    
    {% if not subject %}
    <form dojoType="dijit.form.Form" method="post" action="{{ action }}">{% csrf_token %}
        <script type="dojo/event" event="onSubmit" args="e">
            dojo.stopEvent(e); // prevent the default submit
            if (dojo.byId('editorThread').value ="") {
                window.alert('Please fix fields');
            }

            window.alert("Would submit here via xhr");
            // dojo.xhrPost( {
            //      url: 'foo.com/handler',
            //      content: { field: 'go here' },
            //      handleAs: 'json'
            //      load: function(data) { .. },
            //      error: function(data) { .. }
            //  });
            
        </script>
        <table border="0" width="75%" height="80%"  cellspacing="10">
            <tr>
                <th align="left" style="width: 10%">
                    <label for="id_title">Title:</label>
                </th>
                <td align="left">
                    <input id="id_title" type="text" style="width: 99%" name="title" maxlength="60"/>
                </td>
            </tr>
            <tr>
                <th align="left">
                    <label for="id_body">Body:</label>
                </th>
            </tr>    
            <tr>
                <td colspan="2" >
                    <input type="hidden" id="id_body" name="body"/>
                    <div dojoType="dijit.Editor" id="editorThread"
                     onChange="console.log('editor1 onChange handler: ' + arguments[0])"></div>
                </td>
            </tr>
            <tr>
                <td align="center" colspan="2">
                    <button dojoType="dijit.form.Button" type="button" onClick="dijit.byId('formDialog').hide();">
                        Cancel
                    </button>
                    <button dojoType="dijit.form.Button" type="submit" onClick="submitThread(dojo.byId('id_title').value, arguments[0])">
                        Submit Your Question
                    </button>
                </td>
            </tr>
        </table>
    </form>
    {% else %}
        {{ form }}
        
    {% endif %}
        
{% endblock %}


